"use strict";(self.webpackChunkengineering_com=self.webpackChunkengineering_com||[]).push([[985],{985:(L,_,C)=>{C.r(_),C.d(_,{default:()=>k});let b=!1;const m=[],x=void 0!==window.ontouchstart;var k={name:"overview_window",init(B){const S=this,{$id:t,$click:M}=S.svgCanvas,h={};t("sidepanel_content").insertAdjacentHTML("beforeend",'<div id="overview_window_content_pane" style="width:100%; word-wrap:break-word;  display:inline-block; margin-top:20px;"><div id="overview_window_content" style="position:relative; padding-left:15px; top:0px;"><div style="background-color:#A0A0A0; display:inline-block; overflow:visible;"><svg id="overviewMiniView" width="132" height="100" x="0" y="0" viewBox="0 0 4800 3600" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><use x="0" y="0" xlink:href="#svgroot"> </use></svg><div id="overview_window_view_box" style="min-width:50px; min-height:50px; position:absolute; top:30px; left:30px; z-index:5; background-color:rgba(255,0,102,0.3);"></div></div></div></div>');const c=()=>{const{workarea:e}=S,o=parseFloat(getComputedStyle(e,null).height.replace("px","")),p=parseFloat(getComputedStyle(e,null).width.replace("px","")),a=e.scrollLeft,w=e.scrollTop,n=parseFloat(getComputedStyle(t("svgcanvas"),null).width.replace("px","")),s=parseFloat(getComputedStyle(t("svgcanvas"),null).height.replace("px","")),i=parseFloat(getComputedStyle(t("overviewMiniView"),null).width.replace("px","")),r=parseFloat(getComputedStyle(t("overviewMiniView"),null).height.replace("px","")),y=a/n*i,v=w/s*r,u=p/n*i,l=o/s*r;t("overview_window_view_box").style.minWidth=u+"px",t("overview_window_view_box").style.minHeight=l+"px",t("overview_window_view_box").style.top=v+"px",t("overview_window_view_box").style.left=y+"px"};t("workarea").addEventListener("scroll",()=>{h.viewBoxDragging||c()}),t("workarea").addEventListener("resize",c),c();const F=function(){const e=parseFloat(getComputedStyle(t("svgroot"),null).width.replace("px","")),o=parseFloat(getComputedStyle(t("svgroot"),null).height.replace("px","")),p=o/e*parseFloat(getComputedStyle(t("overviewMiniView"),null).width.replace("px",""));t("overviewMiniView").setAttribute("viewBox","640 480 "+e+" "+o),t("overviewMiniView").setAttribute("height",p),c()};F(),h.viewBoxDragging=!1;const f=function(){const e=parseFloat(getComputedStyle(t("svgcanvas"),null).width.replace("px","")),o=parseFloat(getComputedStyle(t("svgcanvas"),null).height.replace("px","")),p=parseFloat(getComputedStyle(t("overviewMiniView"),null).width.replace("px","")),a=parseFloat(getComputedStyle(t("overviewMiniView"),null).height.replace("px","")),w=parseFloat(getComputedStyle(t("overview_window_view_box"),null).getPropertyValue("left").replace("px",""))/p*e,n=parseFloat(getComputedStyle(t("overview_window_view_box"),null).getPropertyValue("top").replace("px",""))/a*o;t("workarea").scrollLeft=w,t("workarea").scrollTop=n},V=document.querySelector("#overview_window_view_box");return function(e,o,p,a,w,n){b||document.addEventListener(x?"touchmove":"mousemove",function(l){let d=l;l.touches&&(d=l.touches[0]);for(let g=0;g<m.length;g++)m[g](d.clientX,d.clientY)}),b=!0;let s=!1,i=!1,r=0,y=0,v=0,u=0;o.addEventListener(x?"touchstart":"mousedown",function(l){if(l.stopPropagation(),l.preventDefault(),"false"===e.dataset.dragEnabled)return;let d=l;l.touches&&(d=l.touches[0]),s=!0,r=e.offsetLeft-d.clientX,y=e.offsetTop-d.clientY}),document.addEventListener(x?"touchend":"mouseup",function(){w&&i&&w(e,p,parseInt(e.style.left),parseInt(e.style.top)),s=!1,i=!1}),document.addEventListener(x?"touchmove":"mousemove",function(){n&&i&&n(parseInt(e.style.left),parseInt(e.style.top))}),m.push(function(d,g){if(s){if(i||(i=!0,a&&a()),v=d+r,u=g+y,"true"===e.dataset.dragBoundary&&(v<1||v>=window.innerWidth-e.offsetWidth||u<1||u>=window.innerHeight-e.offsetHeight))return;e.style.left=v+"px",e.style.top=u+"px"}})}(V,V,document.querySelector("#overviewMiniView"),()=>{h.viewBoxDragging=!0,f()},(e,o,p,a)=>{e.offsetLeft+e.offsetWidth>parseFloat(getComputedStyle(o,null).width.replace("px",""))?e.style.left=parseFloat(getComputedStyle(o,null).width.replace("px",""))-e.offsetWidth+"px":e.offsetLeft<0&&(e.style.left="0px"),e.offsetTop+e.offsetHeight>parseFloat(getComputedStyle(o,null).height.replace("px",""))?e.style.top=parseFloat(getComputedStyle(o,null).height.replace("px",""))-e.offsetHeight+"px":e.offsetTop<0&&(e.style.top="0px"),h.viewBoxDragging=!1,f()},function(){f()}),M(t("overviewMiniView"),e=>{const o=e.offsetX||e.originalEvent.layerX,p=e.offsetY||e.originalEvent.layerY,a=parseFloat(getComputedStyle(t("overviewMiniView"),null).width.replace("px","")),w=parseFloat(getComputedStyle(t("overviewMiniView"),null).height.replace("px","")),n=parseFloat(getComputedStyle(t("overview_window_view_box"),null).getPropertyValue("min-width").replace("px","")),s=parseFloat(getComputedStyle(t("overview_window_view_box"),null).getPropertyValue("min-height").replace("px",""));let i=o-.5*n,r=p-.5*s;i<0&&(i=0),r<0&&(r=0),i+n>a&&(i=a-n),r+s>w&&(r=w-s),t("overview_window_view_box").style.top=r+"px",t("overview_window_view_box").style.left=i+"px",f()}),{name:"overview window",canvasUpdated:F,workareaResized:c}}}}}]);